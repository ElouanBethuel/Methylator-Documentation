# Tutorial: How to Add a Tool to Methylator  

**1 – Identify the Step Where the Tool Will Be Used and the Corresponding Snakefile**  

- FASTQ download and Quality control: workflow/fastq_dump_QC.rules
- Trimming: workflow/trim.rules
- Alignment: workflow/mapping.rules
- Annotation: scripts/Annotatr.R
- Exploratory analysis: workflow/exploration.rules
- Differential analysis: workflow/differential.rules

!!! Note
    If your tool generates HTML outputs, you can also add them to the final analysis reports by modifying the relevant scripts.

!!! Note
    If your new tool performs the same function as another (e.g., adding a new mapper), make sure to make their usage mutually exclusive.


**2 – Create a New Snakemake Rule in the Appropriate Snakefile**  

In a Snakemake rule, you need to specify:  

- The input files for your tool
- The output files generated by your tool
- The resources required for its execution
- The execution environment (e.g., Singularity image)
- The use of {wildcards} to parallelize across different samples
- The shell commands to run the tool with the appropriate options
- You can also launch scripts (bash, R, Python, etc.)

!!! Note
    The workflow manager (Snakemake) will check for the existence of the output files. If they do not exist, it will trigger the rule. If the necessary input files are not accessible, the rule will fail and indicate the reason.


**3 – Identify the Parameters You Want to Control for This Tool and Add Them to the Configuration File**  

**4 – Modify the Singularity Image by Adding the New Tool Inside**  
